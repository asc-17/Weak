<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Weak.ViewModels"
             x:Class="Weak.Views.SettingsView"
             Title="Settings"
             BackgroundColor="{StaticResource BackgroundLight}">

    <ScrollView>
        <VerticalStackLayout Padding="16,8,16,40" Spacing="32">
            
            <!-- Header -->
            <Label Text="Settings" 
                   FontFamily="InterBold"
                   FontSize="28" 
                   TextColor="{StaticResource TextPrimaryLight}"
                   Margin="8,24,0,0"/>

            <!-- Section: Profile -->
            <VerticalStackLayout Spacing="8">
                <Label Text="PROFILE" 
                       FontFamily="InterSemiBold"
                       FontSize="11" 
                       TextColor="{StaticResource TextSecondaryLight}"
                       Margin="16,0,0,0"/>

                <Border StrokeShape="RoundRectangle 12" 
                        BackgroundColor="White"
                        Stroke="{StaticResource Gray100}"
                        StrokeThickness="1"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.04"/>
                    </Border.Shadow>

                    <Grid Padding="16" ColumnDefinitions="Auto, *">
                        <Label Text="Name" 
                               FontFamily="InterRegular"
                               FontSize="17" 
                               VerticalOptions="Center"
                               TextColor="{StaticResource TextPrimaryLight}"
                               WidthRequest="80"/>
                        <Entry Grid.Column="1"
                               Text="{Binding UserName}"
                               Placeholder="e.g., Alex"
                               FontFamily="InterRegular"
                               FontSize="17"
                               TextColor="{StaticResource TextPrimaryLight}"
                               PlaceholderColor="{StaticResource Gray400}"
                               HorizontalTextAlignment="End"
                               VerticalOptions="Center"/>
                    </Grid>
                </Border>
            </VerticalStackLayout>

            <!-- Section: Schedule -->
            <VerticalStackLayout Spacing="8">
                <Label Text="SCHEDULE" 
                       FontFamily="InterSemiBold"
                       FontSize="11" 
                       TextColor="{StaticResource TextSecondaryLight}"
                       Margin="16,0,0,0"/>

                <Border StrokeShape="RoundRectangle 12" 
                        BackgroundColor="White"
                        Stroke="{StaticResource Gray100}"
                        StrokeThickness="1"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.04"/>
                    </Border.Shadow>

                    <VerticalStackLayout>
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Wake Up" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <TimePicker Grid.Column="1"
                                        Time="{Binding WakeTime}"
                                        TextColor="{StaticResource Primary}"
                                        VerticalOptions="Center"/>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource Gray100}"/>

                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Sleep" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <TimePicker Grid.Column="1"
                                        Time="{Binding SleepTime}"
                                        TextColor="{StaticResource Primary}"
                                        VerticalOptions="Center"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Section: Data Management -->
            <VerticalStackLayout Spacing="8">
                <Label Text="DATA MANAGEMENT" 
                       FontFamily="InterSemiBold"
                       FontSize="11" 
                       TextColor="{StaticResource TextSecondaryLight}"
                       Margin="16,0,0,0"/>
                
                <Border StrokeShape="RoundRectangle 12" 
                        BackgroundColor="White"
                        Stroke="{StaticResource Gray100}"
                        StrokeThickness="1"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.04"/>
                    </Border.Shadow>
                    
                    <VerticalStackLayout>
                        <!-- Import Data -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Import Data" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <Label Grid.Column="1" 
                                   Text="›" 
                                   FontFamily="InterBold"
                                   FontSize="20" 
                                   TextColor="{StaticResource Gray400}"
                                   VerticalOptions="Center"/>
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{StaticResource Gray100}"/>
                        
                        <!-- Export Data -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Export Data" 
                                       FontFamily="InterRegular"
                                       FontSize="17" 
                                       TextColor="{StaticResource TextPrimaryLight}"/>
                                <Label Text="PDF, CSV" 
                                       FontFamily="InterRegular"
                                       FontSize="14" 
                                       TextColor="{StaticResource Gray400}"/>
                            </VerticalStackLayout>
                            <Label Grid.Column="1" 
                                   Text="›" 
                                   FontFamily="InterBold"
                                   FontSize="20" 
                                   TextColor="{StaticResource Gray400}"
                                   VerticalOptions="Center"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Section: Preferences -->
            <VerticalStackLayout Spacing="8">
                <Label Text="PREFERENCES" 
                       FontFamily="InterSemiBold"
                       FontSize="11" 
                       TextColor="{StaticResource TextSecondaryLight}"
                       Margin="16,0,0,0"/>
                
                <Border StrokeShape="RoundRectangle 12" 
                        BackgroundColor="White"
                        Stroke="{StaticResource Gray100}"
                        StrokeThickness="1"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.04"/>
                    </Border.Shadow>
                    
                    <VerticalStackLayout>
                        <!-- Notifications (master) -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Notifications" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <Switch Grid.Column="1" 
                                    IsToggled="{Binding NotificationsEnabled}" 
                                    OnColor="{StaticResource Primary}"
                                    ThumbColor="White"/>
                        </Grid>

                        <!-- Notification sub-rows -->
                        <VerticalStackLayout IsVisible="{Binding NotificationsEnabled}">
                            <BoxView HeightRequest="1" Color="{StaticResource Gray100}" Margin="16,0,0,0"/>
                            <Grid Padding="32,12,16,12" ColumnDefinitions="*, Auto">
                                <Label Text="Weekly Overview" 
                                       FontFamily="InterRegular"
                                       FontSize="15" 
                                       VerticalOptions="Center" 
                                       TextColor="{StaticResource TextPrimaryLight}"/>
                                <Switch Grid.Column="1" 
                                        IsToggled="{Binding NotifWeeklyOverview}" 
                                        OnColor="{StaticResource Primary}"
                                        ThumbColor="White"/>
                            </Grid>
                            <Grid Padding="32,12,16,12" ColumnDefinitions="*, Auto">
                                <Label Text="Deadline Reminder" 
                                       FontFamily="InterRegular"
                                       FontSize="15" 
                                       VerticalOptions="Center" 
                                       TextColor="{StaticResource TextPrimaryLight}"/>
                                <Switch Grid.Column="1" 
                                        IsToggled="{Binding NotifDeadlineReminder}" 
                                        OnColor="{StaticResource Primary}"
                                        ThumbColor="White"/>
                            </Grid>
                        </VerticalStackLayout>

                        <BoxView HeightRequest="1" Color="{StaticResource Gray100}"/>

                        <!-- Device Calendar Sync -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <VerticalStackLayout Spacing="2">
                                <Label Text="Device Calendar Sync" 
                                       FontFamily="InterRegular"
                                       FontSize="17" 
                                       TextColor="{StaticResource TextPrimaryLight}"/>
                                <Label Text="{Binding LastSyncTime, StringFormat='Last synced: {0}'}" 
                                       FontFamily="InterRegular"
                                       FontSize="14" 
                                       TextColor="{StaticResource Primary}"/>
                            </VerticalStackLayout>
                            <Switch Grid.Column="1" 
                                    IsToggled="{Binding CalendarSyncEnabled}" 
                                    OnColor="{StaticResource Primary}"
                                    ThumbColor="White"/>
                        </Grid>

                        <BoxView HeightRequest="1" Color="{StaticResource Gray100}"/>

                        <!-- Start of Week -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Start of Week" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <HorizontalStackLayout Grid.Column="1" Spacing="6" VerticalOptions="Center">
                                <Border StrokeShape="RoundRectangle 8"
                                        BackgroundColor="{Binding IsSundaySelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter=primary}"
                                        Stroke="Transparent"
                                        Padding="10,4">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetWeekStartCommand}" CommandParameter="sunday"/>
                                    </Border.GestureRecognizers>
                                    <Label Text="Sun"
                                           FontFamily="InterMedium"
                                           FontSize="13"
                                           TextColor="{Binding IsSundaySelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter=text}"/>
                                </Border>
                                <Border StrokeShape="RoundRectangle 8"
                                        BackgroundColor="{Binding IsMondaySelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter=primary}"
                                        Stroke="Transparent"
                                        Padding="10,4">
                                    <Border.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding SetWeekStartCommand}" CommandParameter="monday"/>
                                    </Border.GestureRecognizers>
                                    <Label Text="Mon"
                                           FontFamily="InterMedium"
                                           FontSize="13"
                                           TextColor="{Binding IsMondaySelected, Converter={StaticResource BoolToColorConverter}, ConverterParameter=text}"/>
                                </Border>
                            </HorizontalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>

            <!-- Section: Information -->
            <VerticalStackLayout Spacing="8">
                <Label Text="INFORMATION" 
                       FontFamily="InterSemiBold"
                       FontSize="11" 
                       TextColor="{StaticResource TextSecondaryLight}"
                       Margin="16,0,0,0"/>
                
                <Border StrokeShape="RoundRectangle 12" 
                        BackgroundColor="White"
                        Stroke="{StaticResource Gray100}"
                        StrokeThickness="1"
                        Padding="0">
                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,1" Radius="2" Opacity="0.04"/>
                    </Border.Shadow>
                    
                    <VerticalStackLayout>
                        <!-- About -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="About" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <Label Grid.Column="1" 
                                   Text="›" 
                                   FontFamily="InterBold"
                                   FontSize="20" 
                                   TextColor="{StaticResource Gray400}"/>
                        </Grid>
                        
                        <BoxView HeightRequest="1" Color="{StaticResource Gray100}"/>
                        
                        <!-- Feedback -->
                        <Grid Padding="16" ColumnDefinitions="*, Auto">
                            <Label Text="Feedback" 
                                   FontFamily="InterRegular"
                                   FontSize="17" 
                                   VerticalOptions="Center" 
                                   TextColor="{StaticResource TextPrimaryLight}"/>
                            <Label Grid.Column="1" 
                                   Text="›" 
                                   FontFamily="InterBold"
                                   FontSize="20" 
                                   TextColor="{StaticResource Gray400}"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>


            <!-- Version -->
            <Label Text="Version 2.4.0 (Build 309)" 
                   FontFamily="InterRegular"
                   FontSize="12" 
                   TextColor="{StaticResource Gray400}" 
                   HorizontalOptions="Center"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
